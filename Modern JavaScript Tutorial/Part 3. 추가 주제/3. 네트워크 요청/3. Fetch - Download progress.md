# Fetch: Download progress

>**주의: 미번역 문서**
>
>한국어로 번역되지 않은 문서라 직접 번역했다. 의역/오역이 있을 수 있다.
>
>원문과 비교하여 읽도록 하자. 
>– @chae-chae

`fetch` 메서드는 *다운로드* 과정을 추적하게 해준다.

알아두자: 현재는 `fetch`가 *업로드* 과정을 추적하게 해주는 방법은 없다. 그 목적으로는 [XMLHttpRequest](https://ko.javascript.info/xmlhttprequest)를 쓰자. 나중에 다룰 것이다.

다운로드 과정을 추적하려면, `response.body` 프로퍼티를 쓰면 된다. 이것은 `ReadableStream`이라는 특별한 객체다. 이 객체는 body를 덩어리로 제공한다. 읽을 수 있는 스트림은  [Streams API](https://streams.spec.whatwg.org/#rs-class) 명세서에 설명되어 있다.

`response.text()`, `response.json()`와 다른 메서드와는 다르게, `response.body`는 읽기 과정에서 모든 제어를 제공하고 얼마나 사용됐는 지 셀 수 있다.

`response.body`로부터 온 response를 읽는 코드의 초안을 보자:

```js
// instead of response.json() and other methods
const reader = response.body.getReader();

// infinite loop while the body is downloading
while(true) {
  // done is true for the last chunk
  // value is Uint8Array of the chunk bytes
  const {done, value} = await reader.read();

  if (done) {
    break;
  }

  console.log(`Received ${value.length} bytes`)
}
```

`await reader.read()` 호출의 결과는 두 프로퍼티를 가진 객체다:

- **`done`** – 읽기가 완료되면 `true`, 아니면 `false`.
- **`value`** – 바이트의 형(type)이 있는 배열: `Uint8Array`.

>**주의:**
>
>Streams API는 `for await..of` 반복문이 있는 `ReadableStream`의 비동기 이터레이션도 묘사한다. 하지만 아직 널리 지원되지는 않아서([browser issues](https://github.com/whatwg/streams/issues/778#issuecomment-461341033) 참고), `while` 반복문을 쓴다.

